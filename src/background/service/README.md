# TASK Service

功能定位：
提供后台任务的综合执行、管理能力。

设计细节：
首先定义基础的任务执行能力。这些能力定义在基础任务类中，可以用于快速创建业务的任务执行器。
1、任务类的定义。任务类包含了一个任务执行所需的全部业务参数。包括任务的key、任务类型、任务状态、任务执行时的入参、任务的【执行状态】、任务的创建时间。承担的任务包括：根据任务类型找到合适的业务Handler（下面介绍Handler），将入参传入业务Handler来执行。创建时间主要是用于删除策略（下面介绍持久化策略时会介绍），任务的key用于唯一标志该任务。
2、任务的状态。包含等待执行、正在执行、已成功执行、已执行出错。四个状态。
3、任务队列。包含执行队列和等待队列，新任务直接进入执行队列，但是如果执行队列满，进入等待队列。两个队列的大小可以在创建执行器时配置
4、持久化机制。分业务持久化不同的队列，并可以在重启时恢复。恢复时保证完全还原任务的处理状态。为保证执行队列和等待队列的数据在持久化前后一致，需要及时更新它们的持久化信息。每种状态的任务有不同的策略可选，如不持久化、保存固定天数、保存固定条数。


然后，根据这个基础类，可以创建一系列handler。这些handler可以注册在taskService类中。当外界传入Task对象时，可以根据任务类型，调用不同的Handler。
